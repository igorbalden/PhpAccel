{% extends "layout/default.html" %}

{% block content %}
<div class="container col-md-6">
  <form action="admin/register-post" method="post" novalidate 
    onsubmit="return checkInput();">
    <div class="form-group mt-4">
      <h3>User Registration</h3>
      {% if reg_arr.error %}
        <div class="alert alert-danger">{{ reg_arr.error }}</div>
      {% endif %}
      {% if reg_arr.msg %}
        <div class="alert alert-info">{{ reg_arr.msg }}</div>
      {% endif %}
    </div>
    <div class="form-group">
      <label for="email">Email</label>
      <input type="text" name="email" class="form-control" 
        id="email" />
      <span id="email_err" class="form-text text-warning"></span>
    </div>
    <div class="form-group">
      <label for="password">Password</label>
      <input type="password" name="password" class="form-control" 
        id="password" />
      <span id="password_err" class="form-text text-warning"></span>
    </div>
    <div class="form-group">
      <label for="password2">Confirm Password</label>
      <input type="password" name="password2" class="form-control" 
        id="password2" />
      <span id="password2_err" class="form-text text-warning"></span>
    </div>
    <button type="submit" class="btn btn-primary" onclick=""
      >Submit</button>
    <span id="form_err" class="form-text text-warning"></span>
  </form>
  <div class="mt-3">
    Already registered? <a href="admin/login">Login</a>
  </div>
</div>


<script>
window.addEventListener('DOMContentLoaded', (event) => {
});

/*
 *  Check submitted data 
 */
const checkInput = () => {
  if ($('#email').val().trim() === '' ||
      $('#password').val().trim() === '' ||
      $('#password2').val().trim() === '')
  {
    $("#modal-content")
      .html("<div class='modal-body'>All fields are required.</div>");
    $('#cModal').modal('show');
    return false;
  }
  if ($('#password').val() !== $('#password2').val()) {
    $("#modal-content")
      .html("<div class='modal-body'>Passwords don't match.</div>");
    $('#cModal').modal('show');
    return false;
  }
  return true;
};
</script>

{% endblock %}

